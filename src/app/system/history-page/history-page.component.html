<div class="title-block">
  <h3 class="title">
    Страница истории <span class="sparkline bar"></span>
  </h3>
  <div class="pull-right">
    <button class="btn-sm btn btn-primary-outline" (click)="openFilter()">
      <i class="fa fa-filter"></i>
    </button>
  </div>
  <div class="pull-right between">
    <button class="btn-sm btn btn-primary-outline" (click)="resetFilters()">
      <i class="fa fa-remove"></i>
    </button>
  </div>
</div>
<div *ngIf="isLoaded; else loading">
  <wfm-history-chart [data]="chartData"></wfm-history-chart>
  <wfm-history-events
    [categories]="categories"
    [events]="filterEvents"
  ></wfm-history-events>
  <div *ngIf="isFilterView">
    <wfm-history-filter
      (filterApply)="filterApply($event)"
      (filterCancel)="filterCancel()"
      [categories]="categories"
    ></wfm-history-filter>
  </div>
</div>
<ng-template #loading>
  <section class="text-center">
    <wfm-loader></wfm-loader>
  </section>
</ng-template>
